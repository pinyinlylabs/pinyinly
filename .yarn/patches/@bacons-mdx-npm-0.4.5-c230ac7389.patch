diff --git a/build/react/getUniversalComponents.jsx b/build/react/getUniversalComponents.jsx
index b7b8cb28ce3e842a77f19920ae2bc4e930c15128..aba027aa0be3f5687c5dfcaa8d44a8c88a619b87 100644
--- a/build/react/getUniversalComponents.jsx
+++ b/build/react/getUniversalComponents.jsx
@@ -1,51 +1,22 @@
-"use strict";
-var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
-    if (k2 === undefined) k2 = k;
-    var desc = Object.getOwnPropertyDescriptor(m, k);
-    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
-      desc = { enumerable: true, get: function() { return m[k]; } };
-    }
-    Object.defineProperty(o, k2, desc);
-}) : (function(o, m, k, k2) {
-    if (k2 === undefined) k2 = k;
-    o[k2] = m[k];
-}));
-var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
-    Object.defineProperty(o, "default", { enumerable: true, value: v });
-}) : function(o, v) {
-    o["default"] = v;
-});
-var __importStar = (this && this.__importStar) || function (mod) {
-    if (mod && mod.__esModule) return mod;
-    var result = {};
-    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
-    __setModuleDefault(result, mod);
-    return result;
-};
-var __importDefault = (this && this.__importDefault) || function (mod) {
-    return (mod && mod.__esModule) ? mod : { "default": mod };
-};
-Object.defineProperty(exports, "__esModule", { value: true });
-exports.getUniversalComponents = void 0;
-const react_views_1 = require("@bacons/react-views");
-const htmlElements = __importStar(require("@expo/html-elements"));
-const react_1 = __importDefault(require("react"));
-const react_native_1 = require("react-native");
-const AutoImage_1 = require("./AutoImage");
-const headings = __importStar(require("./headings"));
-const List = __importStar(require("./list/List"));
-const getDOMComponents_1 = require("./getDOMComponents");
+import { Image, Text, View } from "@bacons/react-views";
+import * as htmlElements from "@expo/html-elements";
+import React from "react";
+import { Platform } from "react-native";
+import { AutoImage } from "./AutoImage";
+import * as headings from "./headings";
+import * as List from "./list/List";
+import { getDOMComponents, stripExtras, } from "./getDOMComponents";
 /**
  * Get base elements that are generally optimized for cross-platform usage.
  * These are less standard on the web as they use `react-native-web` wrappers,
  * but they will run on platforms that support React Native.
  */
-function getUniversalComponents() {
+export function getUniversalComponents() {
     return {
         // Defaults to ensure web always works since this is a web-first feature.
         // Native can be extended as needed.
-        ...(0, getDOMComponents_1.getDOMComponents)(),
-        ...react_native_1.Platform.select({
+        ...getDOMComponents(),
+        ...Platform.select({
             native: {
                 ul: List.UL,
                 // TODO
@@ -58,60 +29,71 @@ function getUniversalComponents() {
         h2: wrapHeader(headings.H2),
         h3: wrapHeader(headings.H3),
         h4: wrapHeader(headings.H4),
-        h5: (0, getDOMComponents_1.stripExtras)(headings.H5),
-        h6: (0, getDOMComponents_1.stripExtras)(headings.H6),
-        a: (0, getDOMComponents_1.stripExtras)(htmlElements.A),
-        nav: (0, getDOMComponents_1.stripExtras)(htmlElements.Nav),
-        footer: (0, getDOMComponents_1.stripExtras)(htmlElements.Footer),
-        aside: (0, getDOMComponents_1.stripExtras)(htmlElements.Aside),
-        header: (0, getDOMComponents_1.stripExtras)(htmlElements.Header),
-        main: (0, getDOMComponents_1.stripExtras)(htmlElements.Main),
-        article: (0, getDOMComponents_1.stripExtras)(htmlElements.Article),
-        section: (0, getDOMComponents_1.stripExtras)(htmlElements.Section),
+        h5: stripExtras(headings.H5),
+        h6: stripExtras(headings.H6),
+        a: stripExtras(htmlElements.A),
+        nav: stripExtras(htmlElements.Nav),
+        footer: stripExtras(htmlElements.Footer),
+        aside: stripExtras(htmlElements.Aside),
+        header: stripExtras(htmlElements.Header),
+        main: stripExtras(htmlElements.Main),
+        article: stripExtras(htmlElements.Article),
+        section: stripExtras(htmlElements.Section),
         p: Paragraph,
-        b: (0, getDOMComponents_1.stripExtras)(htmlElements.B),
-        s: (0, getDOMComponents_1.stripExtras)(htmlElements.S),
-        i: (0, getDOMComponents_1.stripExtras)(htmlElements.I),
-        q: (0, getDOMComponents_1.stripExtras)(htmlElements.Q),
-        blockquote: (0, getDOMComponents_1.stripExtras)(htmlElements.BlockQuote),
-        br: (0, getDOMComponents_1.stripExtras)(htmlElements.BR),
-        mark: (0, getDOMComponents_1.stripExtras)(htmlElements.Mark),
-        code: (0, getDOMComponents_1.stripExtras)(htmlElements.Code),
+        b: stripExtras(htmlElements.B),
+        s: stripExtras(htmlElements.S),
+        i: stripExtras(htmlElements.I),
+        q: stripExtras(htmlElements.Q),
+        blockquote: stripExtras(htmlElements.BlockQuote),
+        br: stripExtras(htmlElements.BR),
+        mark: stripExtras(htmlElements.Mark),
+        code: stripExtras(htmlElements.Code),
         // TODO
-        inlineCode: (0, getDOMComponents_1.stripExtras)(htmlElements.Code),
-        pre: (0, getDOMComponents_1.stripExtras)(htmlElements.Pre),
-        time: (0, getDOMComponents_1.stripExtras)(htmlElements.Time),
-        strong: (0, getDOMComponents_1.stripExtras)(htmlElements.Strong),
-        del: (0, getDOMComponents_1.stripExtras)(htmlElements.Del),
-        em: (0, getDOMComponents_1.stripExtras)(htmlElements.EM),
-        hr: (0, getDOMComponents_1.stripExtras)(htmlElements.HR),
+        inlineCode: stripExtras(htmlElements.Code),
+        pre: stripExtras(htmlElements.Pre),
+        time: stripExtras(htmlElements.Time),
+        strong: stripExtras(htmlElements.Strong),
+        del: stripExtras(htmlElements.Del),
+        em: stripExtras(htmlElements.EM),
+        hr: stripExtras(htmlElements.HR),
         div: Div,
-        span: react_views_1.Text,
+        span: Text,
         img: Img,
     };
 }
-exports.getUniversalComponents = getUniversalComponents;
-function Paragraph({ style, children }) {
+function Paragraph({ ref, style, children, }) {
     // NOTE(EvanBacon): Unclear why, but mdxjs is wrapping an image in a paragraph tag.
     // This can lead to nesting a div in a p on web, which is invalid.
-    const image = react_1.default.Children.toArray(children).find((child) => {
+    const image = React.Children.toArray(children).find((child) => {
         // @ts-expect-error
         return typeof child === "object" && "props" in child && child.props.src;
     });
     if (image) {
         return <>{children}</>;
     }
-    return <react_views_1.Text style={style} children={children}/>;
+    const nativeStyle = Platform.select({
+        web: [
+            {
+                // This is needed to avoid new lines in markdown wrapped paragraphs
+                // rendering as line breaks on web, because <Text> in react-native-web
+                // uses `white-space: pre-wrap` by default.
+                whiteSpace: "normal",
+            },
+            style,
+        ],
+        default: style,
+    });
+    return <Text ref={ref} style={nativeStyle} children={children}/>;
 }
 function Div(props) {
-    return <react_views_1.View {...props} style={[{ flex: 1 }, props.style]}/>;
+    return <View {...props} style={[{ flex: 1 }, props.style]}/>;
 }
 function Img({ src, style }) {
     const source = typeof src === "string" ? { uri: src } : src;
-    if (react_native_1.Platform.OS === "web" || !source.uri) {
-        return <react_views_1.Image source={source} style={style}/>;
+    if (process.env.EXPO_OS === "web" || !(source === null || source === void 0 ? void 0 : source.uri)) {
+        return <Image source={source} style={style}/>;
     }
-    return <AutoImage_1.AutoImage style={style} source={source}/>;
+    return <AutoImage style={style} source={source}/>;
 }
 function wrapHeader(Element) {
     return function Header({ firstChild, lastChild, firstOfType, index, prevSibling, ...props }) {
diff --git a/build/react/getUniversalComponents.jsx.map b/build/react/getUniversalComponents.jsx.map
index f4cd64b74cdcc11c51ca30cd03ec2335589d6547..dcbe98354d3e40222f3076d61a70b345ef9b5bc6 100644
--- a/build/react/getUniversalComponents.jsx.map
+++ b/build/react/getUniversalComponents.jsx.map
@@ -1 +1 @@
-{"version":3,"file":"getUniversalComponents.jsx","sourceRoot":"","sources":["../../src/react/getUniversalComponents.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Image, Text, View } from \"@bacons/react-views\";\nimport * as htmlElements from \"@expo/html-elements\";\nimport React from \"react\";\nimport { Platform } from \"react-native\";\n\nimport { AutoImage } from \"./AutoImage\";\nimport * as headings from \"./headings\";\nimport * as List from \"./list/List\";\n\nimport {\n  ComponentKeys,\n  getDOMComponents,\n  stripExtras,\n} from \"./getDOMComponents\";\n\n/**\n * Get base elements that are generally optimized for cross-platform usage.\n * These are less standard on the web as they use `react-native-web` wrappers,\n * but they will run on platforms that support React Native.\n */\nexport function getUniversalComponents(): Record<\n  ComponentKeys,\n  React.ComponentType<any>\n> {\n  return {\n    // Defaults to ensure web always works since this is a web-first feature.\n    // Native can be extended as needed.\n    ...getDOMComponents(),\n\n    ...Platform.select({\n      native: {\n        ul: List.UL,\n        // TODO\n        li: List.LI,\n        // TODO\n        ol: List.UL,\n      },\n    }),\n\n    h1: wrapHeader(headings.H1),\n    h2: wrapHeader(headings.H2),\n    h3: wrapHeader(headings.H3),\n    h4: wrapHeader(headings.H4),\n    h5: stripExtras(headings.H5),\n    h6: stripExtras(headings.H6),\n    a: stripExtras(htmlElements.A),\n    nav: stripExtras(htmlElements.Nav),\n    footer: stripExtras(htmlElements.Footer),\n    aside: stripExtras(htmlElements.Aside),\n    header: stripExtras(htmlElements.Header),\n    main: stripExtras(htmlElements.Main),\n    article: stripExtras(htmlElements.Article),\n    section: stripExtras(htmlElements.Section),\n\n    p: Paragraph,\n    b: stripExtras(htmlElements.B),\n    s: stripExtras(htmlElements.S),\n    i: stripExtras(htmlElements.I),\n    q: stripExtras(htmlElements.Q),\n    blockquote: stripExtras(htmlElements.BlockQuote),\n    br: stripExtras(htmlElements.BR),\n    mark: stripExtras(htmlElements.Mark),\n    code: stripExtras(htmlElements.Code),\n    // TODO\n    inlineCode: stripExtras(htmlElements.Code),\n\n    pre: stripExtras(htmlElements.Pre),\n    time: stripExtras(htmlElements.Time),\n    strong: stripExtras(htmlElements.Strong),\n    del: stripExtras(htmlElements.Del),\n    em: stripExtras(htmlElements.EM),\n\n    hr: stripExtras(htmlElements.HR),\n    div: Div,\n    span: Text,\n    img: Img,\n  };\n}\n\nfunction Paragraph({ style, children }) {\n  // NOTE(EvanBacon): Unclear why, but mdxjs is wrapping an image in a paragraph tag.\n  // This can lead to nesting a div in a p on web, which is invalid.\n  const image = React.Children.toArray(children).find((child) => {\n    // @ts-expect-error\n    return typeof child === \"object\" && \"props\" in child && child.props.src;\n  });\n  if (image) {\n    return <>{children}</>;\n  }\n\n  return <Text style={style} children={children} />;\n}\n\nfunction Div(props) {\n  return <View {...props} style={[{ flex: 1 }, props.style]} />;\n}\n\nfunction Img({ src, style }) {\n  const source = typeof src === \"string\" ? { uri: src } : src;\n  if (Platform.OS === \"web\" || !source.uri) {\n    return <Image source={source} style={style} />;\n  }\n\n  return <AutoImage style={style} source={source} />;\n}\n\nfunction wrapHeader(Element) {\n  return function Header({\n    firstChild,\n    lastChild,\n    firstOfType,\n    index,\n    prevSibling,\n    ...props\n  }) {\n    const isFirst = index === 0;\n\n    return (\n      <Element\n        {...props}\n        style={[props.style, isFirst ? { marginTop: 0 } : {}]}\n      />\n    );\n  };\n}\n"]}
\ No newline at end of file
+{"version":3,"file":"getUniversalComponents.jsx","sourceRoot":"","sources":["../../src/react/getUniversalComponents.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Image, Text, View } from \"@bacons/react-views\";\nimport * as htmlElements from \"@expo/html-elements\";\nimport React from \"react\";\nimport { Platform } from \"react-native\";\n\nimport { AutoImage } from \"./AutoImage\";\nimport * as headings from \"./headings\";\nimport * as List from \"./list/List\";\n\nimport {\n  ComponentKeys,\n  getDOMComponents,\n  stripExtras,\n} from \"./getDOMComponents\";\n\n/**\n * Get base elements that are generally optimized for cross-platform usage.\n * These are less standard on the web as they use `react-native-web` wrappers,\n * but they will run on platforms that support React Native.\n */\nexport function getUniversalComponents(): Record<\n  ComponentKeys,\n  React.ComponentType<any>\n> {\n  return {\n    // Defaults to ensure web always works since this is a web-first feature.\n    // Native can be extended as needed.\n    ...getDOMComponents(),\n\n    ...Platform.select({\n      native: {\n        ul: List.UL,\n        // TODO\n        li: List.LI,\n        // TODO\n        ol: List.UL,\n      },\n    }),\n\n    h1: wrapHeader(headings.H1),\n    h2: wrapHeader(headings.H2),\n    h3: wrapHeader(headings.H3),\n    h4: wrapHeader(headings.H4),\n    h5: stripExtras(headings.H5),\n    h6: stripExtras(headings.H6),\n    a: stripExtras(htmlElements.A),\n    nav: stripExtras(htmlElements.Nav),\n    footer: stripExtras(htmlElements.Footer),\n    aside: stripExtras(htmlElements.Aside),\n    header: stripExtras(htmlElements.Header),\n    main: stripExtras(htmlElements.Main),\n    article: stripExtras(htmlElements.Article),\n    section: stripExtras(htmlElements.Section),\n\n    p: Paragraph,\n    b: stripExtras(htmlElements.B),\n    s: stripExtras(htmlElements.S),\n    i: stripExtras(htmlElements.I),\n    q: stripExtras(htmlElements.Q),\n    blockquote: stripExtras(htmlElements.BlockQuote),\n    br: stripExtras(htmlElements.BR),\n    mark: stripExtras(htmlElements.Mark),\n    code: stripExtras(htmlElements.Code),\n    // TODO\n    inlineCode: stripExtras(htmlElements.Code),\n\n    pre: stripExtras(htmlElements.Pre),\n    time: stripExtras(htmlElements.Time),\n    strong: stripExtras(htmlElements.Strong),\n    del: stripExtras(htmlElements.Del),\n    em: stripExtras(htmlElements.EM),\n\n    hr: stripExtras(htmlElements.HR),\n    div: Div,\n    span: Text,\n    img: Img,\n  };\n}\n\nfunction Paragraph({\n  ref,\n  style,\n  children,\n}: React.ComponentProps<typeof Text>) {\n  // NOTE(EvanBacon): Unclear why, but mdxjs is wrapping an image in a paragraph tag.\n  // This can lead to nesting a div in a p on web, which is invalid.\n  const image = React.Children.toArray(children).find((child) => {\n    // @ts-expect-error\n    return typeof child === \"object\" && \"props\" in child && child.props.src;\n  });\n  if (image) {\n    return <>{children}</>;\n  }\n\n  const nativeStyle = Platform.select<typeof style>({\n    web: [\n      {\n        // This is needed to avoid new lines in markdown wrapped paragraphs\n        // rendering as line breaks on web, because <Text> in react-native-web\n        // uses `white-space: pre-wrap` by default.\n        whiteSpace: \"normal\",\n      } as any,\n      style,\n    ],\n    default: style,\n  });\n\n  return <Text ref={ref} style={nativeStyle} children={children} />;\n}\n\nfunction Div(props: React.ComponentProps<typeof View>) {\n  return <View {...props} style={[{ flex: 1 }, props.style]} />;\n}\n\nfunction Img({ src, style }: React.ComponentProps<typeof Image>) {\n  const source = typeof src === \"string\" ? { uri: src } : src;\n  if (process.env.EXPO_OS === \"web\" || !source?.uri) {\n    return <Image source={source} style={style} />;\n  }\n\n  return <AutoImage style={style} source={source} />;\n}\n\nfunction wrapHeader(Element: any) {\n  return function Header({\n    firstChild,\n    lastChild,\n    firstOfType,\n    index,\n    prevSibling,\n    ...props\n  }: any) {\n    const isFirst = index === 0;\n\n    return (\n      <Element\n        {...props}\n        style={[props.style, isFirst ? { marginTop: 0 } : {}]}\n      />\n    );\n  };\n}\n"]}
\ No newline at end of file
