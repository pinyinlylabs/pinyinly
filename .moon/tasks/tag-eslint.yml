tasks:
  lint:
    description: "Run ESLint and fix errors (unless in CI)."
    # Auto-fixing errors outside CI is intended to make this more AI-agent friendly.
    script: eslint . --cache${CI+"=false"} --fix${CI+"=false"}
    inputs:
      # Config files anywhere within the project
      - "**/*.{cjs,js,mjs,json,ts,tsx}"
      - "*.{cjs,js,mjs,json,ts,tsx}"
      # Environment variables
      - "$CI"
      - "$ESLINT_CACHE"
      - "$ESLINT_*"
    deps:
      - eslint-rules:src
    toolchain: "node"
    env:
      NODE_OPTIONS: --import tsx --experimental-sqlite $NODE_OPTIONS
